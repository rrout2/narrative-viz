<!-- <!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Rishav Rout</title>


  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet">
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet">

  <link href="css/resume.min.css" rel="stylesheet">

</head>

<body id="page-top">

</body>

</html> -->
<html>
<head>
  <title>Starting Point</title>
</head>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> circle {fill: lightblue; stroke: black;} </style>
<body onload='init()'>
  <p><button onclick="toggleWhite()">Toggle White</button></p>
  <script>
  var white = true;
  var pie = d3.pie();
  var arc = d3.arc().innerRadius(0).outerRadius(400);
  var illpop_race = [9731959,1850086, 76031, 747637, 12672, 266108];
  var names = ["White", "Black", "AIAN", "Asian", "NHPI", "Multiple"];
  async function init() {
    const illinois_pop_race = [{"white": 9731959, "black": 1850086, "aian": 76031, "asian": 747637, "nhpi": 12672, "mult": 266108}]

    var color = {9731959:'lightblue',1850086:'pink',76031:'lightgreen',747637:'cyan',12672:'lightblue',266108:'violet'};

    var svg = d3.select("body").append("svg")
      .attr("width", 1500)
      .attr("height",800)
      .append("g")
      .attr("transform", "translate(" + 1500 / 2 + "," + 800 / 2 + ")");

    d3.select("svg")
    .select("g")
    .selectAll()
    .data(pie(illpop_race))
    .enter()
    .append("path")
    .attr("d", arc)
    .attr("fill", function(d,i) {var x = d.data; console.log(color[d.data]); return color[d.data];})
    .on("mouseover", function(d, i) {
          console.log(d);
          svg.append("text")
            .attr("dy", ".5em")
            .style("text-anchor", "middle")
            .style("font-size", 45)
            .attr("class","label")
            .style("fill", "black")
            .text(names[i] + ": " + d.data);
          })
          .on("mouseout", function(d) {
            svg.select(".label").remove();
          });

    const data = await d3.csv('https://raw.githubusercontent.com/rrout2/narrative-viz/master/covid_race.csv');
  }

  async function toggleWhite() {
    if (white) {
      white = false;
      var index = names.indexOf("White");
      names.splice(index, 1);
      index = illpop_race.indexOf(9731959);
      illpop_race.splice(index, 1);
    } else {
      white = true;
      names.push("White");
      illpop_race.push(9731959);
    }
    init();
  }

  function clear() {
    d3.select("body").html = "";
  }
  </script>
</body>
</html>
